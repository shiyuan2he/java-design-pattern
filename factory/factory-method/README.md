## 工厂方法模式

### uml类图

[factory-method](./src/main/resources/static/img/factory-method.png)

### 定义
Define an interface for creating an object,but let subclasses decide which class to instance.
Factory Method lets a class defer instantiation to subclasses.

定义一个用于创建对象的接口，让子类决定实例化哪一个类。工厂方法是一个类的实例化延迟到其子类。

抽象产品类：负责定义产品的共性，实现对事物最抽象的定义
具体产品类：
抽象工厂类：对客户暴露的入口，负责定义工厂的功能
具体工厂类：

### 优点

1. 良好的封装行，代码结构清晰
2. 工厂方法模式的扩展性非常优秀。
    
    增加产品类的情况下，只要适当地修改具体的工厂类或扩展一个工厂类，就可以完成“拥抱变化”
3. 屏蔽产品类

    产品类的实现如果变化，调用者不需要关心，它只需要关心产品的接口，只要接口保持不变，系统中的上层模块就不要发生变化。
    因为产品中的实例化工作是由工厂类负责的。
    
4. 工厂方法模式是典型的解耦框架。

    高层模块需要知道产品的抽象类，其他的实现类都不用关心，符合迪米特法则-我不需要的就不要去交流
    
    也符合依赖倒置原则-只依赖产品类的抽象；
    
    也符合里氏替换原则-使用产品子类替换产品父类；
    
### 使用场景

1. 工厂方法模式是new一个对象的替代品，所以在所有需要生成对象的地方都可以使用，但是需要慎重的考虑是否要增加一个工厂类进行管理，增加代码的复杂度;
2. 需要灵活的、可扩展的框架时，可以考虑采用工厂方法模式。

    万物皆对象，那万物也就皆产品类，例如需要设计一个连接邮件服务器的框架，有三种网络协议可供选择：pop3、imap、http，我们就可以把这三种
    连接方法作为产品类，定义一个接口，然后定义对邮件的操作方法，用不同的方法实现三个具体的产品类，再定义一个工厂方法，按照不同的传入条件，
    选择不同的连接方式。如此设计，可以做到完美的扩展，如果某些邮件服务器提供了WebService接口，我们只要增加一个产品类就可以了。
3. 工厂方法模式可以用在异构项目中。

    例如，通过webservice与一个非Java的项目交互，虽然WebService号称是可以做到异构系统的同构化，但是在实际的开发中，还是会碰到很多问题，
    如类型问题、wsdl文件的支持问题等。从WSDL中产生的对象都认为是一个产品，然后由一个具体的工厂类进行管理，减少与外围系统的耦合。
4. 可以使用在测试驱动开发的框架下。
